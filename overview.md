# Copilot Workspace: 概要

[Copilot Workspace](https://githubnext.com/projects/copilot-workspace/)は、_タスク中心_ の AI アシスタントです。開発者としての毎日はタスクから始まり、そのタスクを探求し、理解し、洗練し、完了するまでの旅をします。この旅はエキサイティングで、挑戦的で、魅力的で、やりがいのあるものです。Copilot Workspace は、この旅をあなたと共に歩み、タスクから動作するコードへの旅をサポートします。

Copilot Workspace は、その設計と開発を導く一連の原則に基づいて構築されています：

* Copilot Workspace は_コンテキストに基づいています_。GitHub と深く統合されており、タスクのコンテキスト（リポジトリ、イシュー、プルリクエスト）を認識しています。

* Copilot Workspace は_支援的です_。未知のタスクをナビゲートするためのキャンバスを提供し、新しい種類の AI 支援で開発スキルを拡張します。

* Copilot Workspace は_普及しています_。GitHub 上のすべての有効なリポジトリのすべてのイシューで利用可能で、常に待機しています。新しいコードを開始する際にも、自然言語を使用して新しいソフトウェアを作成するために、すべてのテンプレートリポジトリで利用可能です。

* Copilot Workspace は_反復的です_。Copilot Workspace は、AI 生成の出力を確認し、レビューし、洗練し、反復することを奨励します。開発者であるあなたがコントロールを持っています。

* Copilot Workspace は_協力的です_。セッションをチームと共有し、イシューやプルリクエストにセッションのリンクを公開できます。また、リポジトリのメンテナーであれば、リポジトリでの AI 支援開発の使用を管理するためのコントロールを提供します。

* Copilot Workspace は_設定可能です_。一般的なタスクを指定する深いリンクを通じて、Copilot Workspace をワークフローに統合できます。

このマニュアルでは、Copilot Workspace の概念と機能を紹介し、効果的に使用するためのガイドを提供します。

<img src="images/overview/session.png" width="600" alt="完全に実装されたワークスペースセッション">

*完全に実装されたワークスペースセッション*

## 機能

1. [タスク](#task)
1. [仕様](#specification)
1. [計画](#plan)
1. [実装](#implementation)
1. [ファイルの反復](#iterating-on-files)
1. [統合ターミナル](#integrated-terminal)
1. [セッション共有](#session-sharing)
1. [タスクの完了](#task-completion)
1. [セッションダッシュボード](#session-dashboard)

## タスク

すべての Copilot Workspace の始まりは「タスク」です。これは意図を自然言語で記述したものです。タスクには常にコンテキストがあります：GitHub リポジトリです。
この技術プレビューでは、Copilot Workspace は 4 種類のタスクをサポートしています：イシューの解決、プルリクエストの洗練、[テンプレートからのリポジトリ作成](creating-repos.md)、およびアドホックタスクです。ここでは、最も一般的なエントリポイントであるイシューの解決に焦点を当てます。

技術プレビューに登録すると、GitHub のすべてのイシューに新しい「ワークスペースで開く」ボタンが表示されます：

<img src="images/general/open-in-workspace.png" width=400 alt="イシューページのボタンをクリックしてCopilot Workspaceで開く">

*イシューを Copilot Workspace で開く*

これにより、このイシューにコンテキスト化された Copilot Workspace が開きます。イシュータスクの場合、タスクはイシューのタイトルと本文、およびイシューのコメントスレッドに基づいています。Copilot Workspace はすぐにタイムラインの次のステップに進みます。これは次のようになります：

<img src="images/overview/issue-timeline-representation.png" width=600 alt="イシュータスクのタイムライン表現">

*タスクは「イシュー」とラベル付けされ、分析が開始されます*

## 仕様

非トリビアルなタスク定義（例：長いコメントスレッドを持つイシュー）を要約するために、Copilot Workspace は最初にタスクの「トピック」を生成します。これは、コードベースに対して提起できる質問の形を取り、成功基準を定義するために使用されます（[仕様](#specification)セクションを参照）。

<img src="images/overview/topic-question.png" width=600 alt="トピックの質問">

*トピックは、イシューのタイトルには全く欠けている明確さをもたらします*

トピックは、タスクをその本質にまで絞り込み、Copilot Workspace が正しい方向に進んでいるかどうかを早期に確認するための迅速な機会を提供します。トピックが間違っている場合、続行する必要はありません。しかし、トピックが正しい場合、タスクをよりよく理解し、タスクに関連するコードベースの最も重要な側面に焦点を当てるのに役立ちます。

トピックを生成した後、Copilot Workspace は、タスクとトピックに基づいてコードベースの現在の動作を説明する箇条書きのリストを生成します。これにより、Copilot Workspace が正しい方向に進んでいるという自信を深めることができ、現在の状態を完全に理解していない場合にコンテキストにオンボードする手段として機能します。

<img src="images/overview/current-spec.png" width=600 alt="現在の仕様">

*現在の仕様は、トピックの質問に対して現在の状態に基づいて回答します*

Copilot Workspace が何かを間違えた場合、現在の仕様のステップを簡単に編集/削除したり、完全に新しい仕様を再生成することができます（「再試行」）。実際には、これらは最初の試行でかなり良い結果を出すことが多いです。

現在の仕様の後、Copilot Workspace は「提案された仕様」を生成します。これは、タスクを解決した後のコードベースの状態を説明する箇条書きのリストです（実質的にはトピックの質問に回答するものです）。特に、提案された仕様は、成功基準の定義に焦点を当てており、実装の詳細には立ち入りません（これは[計画](#plan)の役割です）。

<img src="images/overview/proposed-spec.png" width=600 alt="提案された仕様">

*提案された仕様は、タスクを解決するためにコードベースをどのように編集するかを示します*

## コンテンツ選択

現在および提案された仕様を生成するために、そして以下のすべてのステップにおいて、Copilot Workspace はタスクを理解し完了するために関連するコードベースのファイルを特定する必要があります。これを行うために、LLM 技術と従来のコード検索の組み合わせを使用します。最も高ランクのファイルの内容は、ワークフローのほぼすべてのステップでコンテキストとして使用されます。

ユーザーは、仕様パネルの「参照を表示」ボタンを使用して、Copilot Workspace によって選択されたファイルを確認できます。選択するファイルを調整するために、ユーザーはタスクを編集し、自然言語を使用して関連するファイルを指定できます。

<img src="images/overview/references.png" width=600 alt="参照ダイアログを表示">

*モデルが元の仕様と変更された仕様を生成するために使用した参照*

## 計画

現在および提案された仕様に満足したら、Copilot Workspace に計画を生成するように依頼できます。計画は、提案された仕様の成功基準を達成するために変更する必要があるファイルのリストです（例：編集、作成、削除、移動、または名前変更）。さらに、各変更されたファイルには、具体的な変更を示すステップのリストが含まれています。

仕様と同様に、計画は完全に編集可能で再生成可能であり、Copilot Workspace を正しい方向に導くために洗練することができます。

<img src="images/overview/plan.png" width=600 alt="計画">

*計画、1 つのファイルを編集し、2 つ目のファイルを追加するためのステップを示しています*

## 実装

計画に満足したら、「実装」ボタンをクリックして実装を開始できます。これにより、UI が右側に一連のキューに入ったファイルの更新を表示し始め、ファイルの内容を 1 つずつ生成し始めます。ファイルの生成が始まると、その計画に関連するエントリが進行中として表示されます。そして、完了すると、計画は完了として表示されます。

ファイルが実装されると、Copilot Workspace はそのファイルの差分ビューを表示し、最初の変更箇所に自動的にスクロールします。差分エディタは編集可能であり、タスク、仕様、計画の変更を通じて反復する代わりに、コードに小さな修正を加えることができます。

## ファイルの反復

Copilot Workspace は常にすべてを正しく行うわけではないため、ユーザーがファイルごとに実装を反復することを容易にします。計画の各ファイルのステップに項目を追加、削除、編集し、チェックボックスを選択して「選択したファイルを更新」ボタンをクリックするだけです。これにより、選択したファイルの内容が再生成され、差分ビューが更新されます。

たとえば、差分を直接編集することもできますし、計画に戻ってそこで変更を加えることもできます。より広範な変更が必要な場合は、計画全体を再生成することもできます。

<img src="images/overview/file-iteration.png" width=600 alt="ファイル反復の計画パネル">

*計画パネルは、ユーザーがファイルごとに実装を反復することを可能にします*

## 統合ターミナル

計画を実装したら、Copilot Workspace は統合ターミナルを起動し、シェルコマンドを実行することで変更の正確性を検証することができます。これにより、変更に対してビルド、リント、テストなどを実行し、タスクとその完了状態についての信頼を迅速かつ効果的に得ることができます。ターミナルは Codespace によってバックアップされており、完全な開発環境がインストールされた安全なサンドボックスです。

<img src="images/overview/terminal.png" width=600 alt="統合ターミナル">

*統合ターミナル、生成されたブランチ名とオンデマンドコンピュートへのアクセスを表示*

より広範な変更を加えたり、リッチなエディタ機能（例：ステップデバッグ）を活用したい場合は、Copilot Workspace セッションを Codespace で開くことができます。Codespace のサポートされているクライアントを使用して行うことができます。

## セッション共有

ワークスペースセッションを他の人と共有する（例：アドホックなコードレビューを行う、初期の実装アイデアを共有する）ことを容易にするために、Copilot Workspace はユーザーが共有リンクを生成できるようにします。これらのリンクは、Copilot Workspace プレビューの一部でないゲストとも共有できます。

共有セッションは元のセッションのコピーです。非ゲストユーザーは、タスクを続行したり、元のセッションに干渉せずに代替ソリューションを探求するための出発点として使用できます。ゲストユーザーはセッションを表示できますが、ワークスペースを使用して変更を加えることはできません。

<img src="images/overview/share-link.png" width=600 alt="共有リンクの生成">

*ヘッダーバーから共有リンクを生成*

イシューやプルリクエストを使用する場合、次のこともできます：

* イシューコメントに公開。Copilot Workspace は、セッションの共有リンクを含むコメントを自動的に生成し、イシューに含めます。これにより、レビュアーはワークスペースセッションに迅速にアクセスし、提案された変更を確認できます。

* プルリクエストコメントに公開。イシューコメントと同様に、Copilot Workspace はセッションの共有リンクを含むコメントを自動的に生成し、プルリクエストに含めます。これにより、レビュアーはワークスペースセッションに迅速にアクセスし、提案された変更を確認できます。

## タスクの完了

タスクが実装され、検証され、レビューされたら、作業しているタスクの種類に応じて、さまざまな方法でタスクを完了できます。

<img src="images/overview/task-completion.png" width=600 alt="プルリクエストの作成">

*実装された変更のプルリクエストを作成*

| タスクの種類 | 利用可能な完了方法 |
|-----------| -------------------- |
| イシュー | — プルリクエストを作成 <br> — ドラフトプルリクエストを作成 <br> — 新しいブランチにプッシュ <br> — 現在のブランチに変更をプッシュ（リポジトリへのコミット権限がある場合のみ利用可能） <br> <br> 書き込み権限がない場合、リポジトリをフォークすることがあります |
| アドホックタスク | — *イシューと同様* |
| PR タスク | — プルリクエストを更新（変更を含む新しいコミットをプッシュ） <br> — *イシューと同様* |
| リポジトリタスク | — リポジトリを作成（選択したテンプレートリポジトリから新しいリポジトリを作成し、変更を含める） |

## セッションダッシュボード

Copilot Workspace は自動的に作業を保存します。また、セッションダッシュボードを提供し、後で作業を簡単に再開できるようにします。電話でタスクを開始し、後でラップトップで完了することも、逆も可能です。

<img src="images/general/dashboard.png" width=600 alt="Copilot Workspaceダッシュボード">

*最近のセッション、ブックマークされたセッション、完了したセッションを表示する Copilot Workspace ダッシュボード*

ツールバーのボタンを使用して、セッション内で元に戻すおよびやり直しをサポートしています。

## 付録：用語集

| 用語 | 定義 |
|------|------------|
| Copilot Workspace | 毎日のタスクを探索し完了するために設計された Copilot ネイティブの開発環境 |
| ターゲット | 特定のコミットでのコードベースのブランチ |
| タスク | ターゲットに対する変更を自然言語で記述したもの |
| トピック | 通常、質問形式でタスクを簡潔に要約したもの |
| 仕様 | タスクに関連するターゲットの現在および提案された状態の説明 |
| 計画 | 現在の状態から提案された状態にターゲットを変換するために、追加、削除、または変更するファイルのリストと、それぞれのファイルに関するメモ |
| 実装 | タスクを完了するために適用されるターゲットへの一連の変更 |
| セッション | タスクを完了するためのユーザーの進捗状況を保存したもの。1 つのタスクに対して多くのセッションが存在する可能性があります |
| スナップショットセッション | 「共有リンク」をクリックしたときに作成されるユーザーのセッションのスナップショット。タスクの進捗状況と UX の状態の両方を含む |
