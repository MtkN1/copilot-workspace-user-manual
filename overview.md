# Copilot Workspace: Overview

[Copilot Workspace](https://githubnext.com/projects/copilot-workspace/) は、_タスク中心_ の AI アシスタントです。開発者として毎日、タスクから始まり、そのタスクを探索し、理解し、洗練し、完了するまでの旅をします。この旅は、エキサイティングで、挑戦的で、魅力的で、やりがいのあるものです。Copilot Workspace は、この旅をあなたと共に歩み、タスクから動作するコードへの旅をサポートします。

Copilot Workspace は、その設計と開発を導く一連の原則に基づいて構築されています：

* Copilot Workspace は _コンテキストに基づいています_。GitHub と深く統合されており、タスクのコンテキスト（リポジトリ、問題、プルリクエスト）を認識しています。

* Copilot Workspace は _支援的です_。未知のタスクをナビゲートするためのキャンバスを提供し、新しい種類の AI 支援で開発スキルを拡張します。

* Copilot Workspace は _普及しています_。GitHub のすべての有効なリポジトリのすべての問題で利用可能で、常に待機しています。新しいコードを開始する際にも、テンプレートリポジトリで利用可能で、自然言語を使用して新しいソフトウェアを作成できます。

* Copilot Workspace は _反復的です_。Copilot Workspace は、AI 生成の出力を確認し、レビューし、洗練し、反復することを奨励します。開発者であるあなたがコントロールしています。

* Copilot Workspace は _協力的です_。セッションをチームと共有し、問題やプルリクエストにリンクを公開できます。また、リポジトリのメンテナーであれば、リポジトリでの AI 支援開発の使用を管理するためのコントロールを提供します。

* Copilot Workspace は _設定可能です_。一般的なタスクを指定する Copilot Workspace へのディープリンクを介して、ワークフローに統合できます。

このマニュアルでは、Copilot Workspace の概念と機能を案内し、効果的に使用するための手助けをします。

<img src="images/overview/session.png" width="600" alt="完全に実装されたワークスペースセッション"><br> *完全に実装されたワークスペースセッション*

## 機能

1. [タスク](#task)
1. [仕様](#specification)
1. [計画](#plan)
1. [実装](#implementation)
1. [ファイルの反復](#iterating-on-files)
1. [統合ターミナル](#integrated-terminal)
1. [セッション共有](#session-sharing)
1. [タスク完了](#task-completion)
1. [セッションダッシュボード](#session-dashboard)

## タスク

Copilot Workspace のすべては「タスク」から始まります。これは、自然言語での意図の説明です。タスクには常にコンテキストがあります：GitHub リポジトリです。
この技術プレビューでは、Copilot Workspace は 4 種類のタスクをサポートしています：問題の解決、[プルリクエストの洗練](pull-request-tasks.md)、[テンプレートからのリポジトリ作成](creating-repos.md)、および [アドホックタスク](adhoc-tasks.md) です。ここでは、最も一般的なエントリーポイントである問題の解決に焦点を当てます。

技術プレビューに登録すると、GitHub のすべての問題に「Open in Workspace」ボタンが表示されます：

<img src="images/general/open-in-workspace.png" width=400 alt="Copilot Workspace で開くボタン"><br> *問題を Copilot Workspace で開く*

これにより、この問題にコンテキスト化された Copilot Workspace が開きます。問題タスクの場合、タスクは問題のタイトルと本文、および問題のコメントスレッドに基づいています。Copilot Workspace はすぐにタイムラインの次のステップに進みます。これは次のようになります：

<img src="images/overview/issue-timeline-representation.png" width=600 alt="問題タスクのタイムライン表現"><br> *タスクは「問題」とラベル付けされ、分析が始まります*

## 仕様

非自明なタスク定義（例：長いコメントスレッドを持つ問題）を要約するために、Copilot Workspace は最初にタスクの「トピック」を生成します。これは、コードベースに対して提起できる質問の形式を取り、成功基準の前後を定義するために使用されます（以下の [仕様](#specification) セクションを参照）。

<img src="images/overview/topic-question.png" width=600 alt="トピックの質問"><br> *トピックは、問題のタイトルには全く欠けている明確さをもたらします*

トピックは、タスクをその本質にまで蒸留し、Copilot Workspace が正しい方向に進んでいるかどうかを早期かつ迅速に確認する方法と考えることができます。トピックが間違っている場合は、続行する必要はありません。しかし、トピックが正しい場合、それはタスクをよりよく理解し、タスクに関連するコードベースの最も重要な側面に焦点を当てるのに役立ちます。

トピックを生成した後、Copilot Workspace は、タスクとトピックに基づいてコードベースの現在の動作を説明する箇条書きリストを生成します。これにより、Copilot Workspace が正しい方向に進んでいるという自信が高まり、現在の状態を完全に理解していない場合にコンテキストにオンボードする手段として機能します。

<img src="images/overview/current-spec.png" width=600 alt="現在の仕様"><br> *現在の仕様は、トピックの質問に現在の状態に基づいて回答します*

Copilot Workspace が何かを間違えた場合は、現在の仕様からステップを簡単に編集/削除するか、まったく新しい仕様を再生成することができます（「再試行」）。実際には、これらは最初の試行でかなり良い結果をもたらすことが多いです。

現在の仕様の後、Copilot Workspace は「提案された仕様」を生成します。これは、タスクを解決した後のコードベースの状態を説明する箇条書きリストです（実質的にはトピックの質問に回答します）。特に、提案された仕様は、成功基準の定義に焦点を当てており、実装の詳細には立ち入りません（これは [計画](#plan) の役割です）。

<img src="images/overview/proposed-spec.png" width=600 alt="提案された仕様"><br> *提案された仕様は、タスクを解決するためにコードベースをどのように編集するかを示します*

## コンテンツ選択

現在および提案された仕様を生成するために、そして以下のすべてのステップのために、Copilot Workspace はタスクを理解し完了するためにコードベースのどのファイルが関連しているかを特定する必要があります。これは、LLM 技術と従来のコード検索の組み合わせによって行われます。最も高ランクのファイルの内容は、ワークフローのほぼすべてのステップのコンテキストとして使用されます。

ユーザーは、仕様パネルの「参照を表示」ボタンを使用して、Copilot Workspace によって選択されたファイルを確認できます。選択されたファイルを調整するには、タスクを編集し、自然言語を使用して関連するファイルを指定できます。

<img src="images/overview/references.png" width=600 alt="参照ダイアログを表示"><br> *元の仕様と変更された仕様を生成するためにモデルが使用した参照*

## 計画

現在および提案された仕様に満足したら、Copilot Workspace に計画を生成するように依頼できます。計画は、提案された仕様の成功基準を達成するために変更する必要があるファイル（例：編集、作成、削除、移動、または名前変更）のリストです。さらに、各変更ファイルには、具体的な変更を示すステップのリストが含まれています。

仕様と同様に、計画は完全に編集可能で再生成可能であり、Copilot Workspace を正しい方向に導くために洗練および指示することができます。

<img src="images/overview/plan.png" width=600 alt="計画"><br> *1 つのファイルを編集し、2 つ目のファイルを追加するために必要なステップを示す計画*

## 実装

計画に満足したら、「実装」ボタンをクリックして実装を開始できます。これにより、UI が右側に一連のキューに入れられたファイル更新を表示するように更新され、ファイルの内容を 1 つずつ生成し始めます。ファイルの生成が始まると、その計画に関連するエントリが進行中として表示されます。完了すると、計画は完了として表示されます。

ファイルが実装されると、Copilot Workspace はそのファイルの差分ビューをレンダリングし、最初の変更に自動的にスクロールします。差分エディタは編集可能であり、タスク、仕様、計画の変更を通じて反復するのではなく、コードに直接小さな修正を加えることができます。

## ファイルの反復

Copilot Workspace は常にすべてを正しく行うわけではないため、ユーザーがファイルごとに実装を反復することを容易にします。各ファイルの計画ステップに項目を追加、削除、編集し、チェックボックスを選択して「選択したファイルを更新」ボタンをクリックするだけです。これにより、選択したファイルの内容が再生成され、差分ビューが更新されます。

たとえば、差分を直接編集することも、計画に戻ってそこで変更を加えることもできます。より広範な変更が必要な場合は、計画全体を再生成することもできます。

<img src="images/overview/file-iteration.png" width=600 alt="ファイル反復の計画パネル"><br> *計画パネルは、ユーザーがファイルごとに実装を反復することを可能にします*

## 統合ターミナル

計画を実装したら、Copilot Workspace は統合ターミナルを起動し、シェルコマンドを実行することで変更の正確性を検証することができます。これにより、変更に対してビルド、リンティング、テストなどを実行し、タスクとその完了状態についての信頼性を迅速かつ効果的に得ることができます。ターミナルは Codespace によってバックアップされており、完全な開発環境がインストールされた安全なサンドボックスです。

<img src="images/overview/terminal.png" width=600 alt="統合ターミナル"><br> *統合ターミナル、生成されたブランチ名とジャストインタイムコンピュートへのアクセスを表示*

より広範な変更を加えたり、リッチエディタ機能（例：ステップデバッグ）を活用したりする場合は、Copilot Workspace セッションを Codespace で開き、Codespace がサポートする任意のクライアントを使用できます。

## セッション共有

アドホックなコードレビューを行ったり、初期の実装アイデアを共有したりするために、ワークスペースセッションを他の人と共有することを容易にするために、Copilot Workspace はユーザーが共有リンクを生成できるようにします。これらのリンクは、Copilot Workspace プレビューの一部でないゲストと共有することもできます。

共有セッションは元のセッションのコピーです。非ゲストユーザーは、タスクを続行したり、元のセッションに干渉せずに代替ソリューションを探索するための出発点として使用できます。ゲストユーザーはセッションを表示できますが、ワークスペースを使用して変更を加えることはできません。

<img src="images/overview/share-link.png" width=600 alt="共有リンクの生成"><br> *ヘッダーバーから共有リンクを生成*

問題やプルリクエストを扱う際には、次のこともできます：

* 問題コメントに公開。Copilot Workspace は、セッションの共有リンクを含むコメントを自動的に生成し、問題に含めます。これにより、レビュアーはワークスペースセッションに迅速にアクセスし、提案された変更を確認できます。

* プルリクエストコメントに公開。問題コメントと同様に、Copilot Workspace はセッションの共有リンクを含むコメントを自動的に生成し、プルリクエストに含めます。これにより、レビュアーはワークスペースセッションに迅速にアクセスし、提案された変更を確認できます。

## タスク完了

タスクが実装され、検証され、レビューされたら、作業しているタスクの種類に応じて、さまざまな方法でタスクを完了できます。

<img src="images/overview/task-completion.png" width=600 alt="プルリクエストの作成"><br> *実装された変更のプルリクエストを作成*

| タスクの種類 | 利用可能な完了方法 |
|--------------|--------------------|
| 問題 | — プルリクエストを作成 <br> — ドラフトプルリクエストを作成 <br> — 新しいブランチにプッシュ <br> — 現在のブランチに変更をプッシュ（リポジトリにコミット権限がある場合のみ利用可能） <br> <br> これらは、書き込みアクセス権がない場合、リポジトリをフォークすることがあります |
| アドホックタスク | — *問題と同様* |
| PR タスク | — プルリクエストを更新（変更を含む新しいコミットをプッシュ） <br> — *問題と同様* |
| リポジトリタスク | — リポジトリを作成（選択したテンプレートリポジトリから新しいリポジトリを作成し、変更を含める） |

## セッションダッシュボード

Copilot Workspace は自動的に作業を保存します。また、セッションダッシュボードを提供し、後で作業を簡単に再開できるようにします。電話でタスクを開始し、その後ラップトップで完了することも、逆も可能です。

<img src="images/general/dashboard.png" width=600 alt="Copilot Workspace ダッシュボード"><br> *最近のセッション、ブックマークされたセッション、完了したセッションを表示する Copilot Workspace ダッシュボード*

ツールバーのボタンを使用して、セッション内で元に戻すおよびやり直しをサポートしています。

## 付録：用語集

| 用語 | 定義 |
|------|------|
| Copilot Workspace | 毎日のタスクを探索し完了するために設計された Copilot ネイティブの開発環境 |
| ターゲット | 特定のコミット時点でのコードベースのブランチ |
| タスク | ターゲットに対する変更の自然言語による説明 |
| トピック | 通常は質問形式のタスクの簡潔な 1 文の要約 |
| 仕様 | タスクに関連するターゲットの現在および提案された状態の説明 |
| 計画 | 現在の状態から提案された状態にターゲットを変換するために、追加、削除、変更するファイルのリストと、それぞれのファイルに関するメモ |
| 実装 | タスクを完了するために適用されるターゲットへの変更のセット |
| セッション | タスクを完了するためのユーザーの進行状況。1 つのタスクには多くのセッションが存在する可能性があります |
| スナップショットセッション | 「共有リンク」をクリックしたときに作成されるユーザーのセッションのスナップショット。タスクの進行状況と UX 状態の両方を含む |
